<!-- Button trigger modal -->
<div class="row">
  <div class="card">
    <h4 class="card-header">Liste des categorys</h4>
    <div class="card-body">
      <div class="row">
        <div class="col-9 my-5">
  
          <button type="button" class="btn btn-primary col-5 px-5 " data-bs-toggle="modal" data-bs-target="#addcategoryModal">
            Ajouter un category
          </button>
        </div>
        
        <div class="col-3 my-5">
          <div class="input-group  ">
            <span class="input-group-text " ><i class="fa fa-search"></i></span>
            <input type="text" class="form-control bg-gray " [(ngModel)]="searchText" placeholder="search">
          </div>      </div>
      </div>
    
  
      <div class="row">
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">nom</th>
              
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let category of categories let i=index">
              <th>{{i+1}} </th>
              <td>{{category.nom}} </td>
              
              
              <td>
                <button class="btn btn-info text-white mx-1" (click)="showData(category._id) " data-bs-toggle="modal" data-bs-target="#updatecategoryModal">update</button>
                <button class="btn btn-danger" (click)="delete(category._id)">Delete</button>
  
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  
  
      <div class="modal fade" id="addcategoryModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-Nom" id="exampleModalLabel">Create category</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form *ngIf="categoryForm" [formGroup]="categoryForm" (ngSubmit)="addCategory()">
                <div class="mb-3 row">
                  <label for="nom" class="col-form-label col-sm-2">Nom:</label>
                  <div class="col-md-5">
                    <input type="text" class="form-control" formControlName="nom" placeholder="nom"  [ngClass]="{'is-valid': submitted &&
                    !categoryForm.get('nom')?.errors,'is-invalid': submitted && categoryForm.get('nom')?.errors}" >
                    </div>
                </div>
                    <div class="invalid-feedback d-block" *ngIf=" submitted && categoryForm.get('nom')?.hasError('required')">
                        nom est obligatoire
                    </div>
                    <!-- <div class="mb-3 row">
                      <label  class="col-form-label col-sm-4">Livres</label>
                      <div class="form-group col-sm-8" >
                        <ng-select class="bootstrap" placeholder="Choose livre for your category"
                        [options]="livres" formControlName="livres" [multiple]="true">
                    </ng-select>
                      </div>
                     </div> -->
                   
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="updatecategoryModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-Nom" id="exampleModalLabel">Update Category</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form *ngIf="categoryForm" [formGroup]="categoryForm" (ngSubmit)="update()">
                <div class="mb-3 row">
                  <label for="nom" class="col-form-label col-sm-2">nom:</label>
                  <div class="col-md-5">
                    <input type="text" class="form-control" formControlName="nom" placeholder="nom"  [ngClass]="{'is-valid': submitted &&
                    !categoryForm.get('nom')?.errors,'is-invalid': submitted && categoryForm.get('nom')?.errors}" >
                    </div>
                </div>
                <!-- <fieldset class="form-group" >
                  <ng-select class="bootstrap" placeholder="Choose Tag for your Event"
                      [options]="livres" formControlName="livres" [multiple]="true">
                  </ng-select>
              </fieldset> -->

                <!-- <div class="mb-3 row">
                  <label  class="col-form-label col-sm-4">Livres</label>
                  <fieldset class="form-group col-sm-8" >
                    <select formControlName="livres" >
       <option *ngFor="let livre of livres" [value]="livre.value">{{livre.nom}}</option>
                    </select>
                </fieldset>
                 </div> -->
               
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
